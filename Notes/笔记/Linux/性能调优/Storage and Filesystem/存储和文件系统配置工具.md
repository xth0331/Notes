# 存储和文件系统配置工具

## 配置存储性能的Tuned配置文件

`tuned`服务提供了许多配置文件，旨在提高特定用例的性能。以下配置文件对于提高存储性能很有用。

- latency-performance（延迟性能）
- throughput-performance（吞吐量性能）默认

要在系统上配置配置文件，运行以下命令，将NAME替换为要是用的配置文件的名称。

```bash
tuned-adm profile NAME
```

`tuned-adm recommended` 命令为系统建议适当的配置文件。

## 设置默认I/O调度器

默认I/O调度器是在没有为设备明确指定其他调度器时使用的调度器。

如果未指定默认调度器，则`cfq`调度器用于SATA设备，`deadline`调度器用于所有其他设备。如果按照本说明指定默认调度器，则该默认调度器将应用于所有设备。

要设置默认I/O调度器，可以使用`Tuned`工具，也可以手工修改`/etc/default/grub`文件。

建议使用`tuned`工具在引导的系统上指定默认调度器。要设置`elevator`参数，启用`disk`插件。

要使用`GRUB2`修改默认调度程序，在引导或系统引导时将`elevator`参数附加到内核命令行。可以使用`tuned`工具，也可以手动修改`/etc/default/grub`文件。



### 使用GRUB2设置默认调度器

在引导的系统上设置默认I/O调度器，并在从新引导后使配置保持不变：

1. 添加`elevator`参数到`/etc/default/grub`文件的`GRUB_CMDLINE_LIUNX`行。

   ```bash
   cat /etc/default/grub
   
   
   GRUB_CMDLINE_LINUX="crashkernel=auto" rd.lvm.lv=/vg00/lvroot rd.lvm.lv=vg--/lvswap elevator
   ```

   可用的调度器有`deadline`，`noop`和`cfq`。

2. 添加`elevator`参数创建新配置。`GRUB2配置文件的位置在具有BIOS固件的系统和具有UEFI的系统上是不同的。使用以下命令之一重建GRUB2配置文件。

   - 在具有BIOS固件的系统上，使用：

     ``````bash
     grub-mkconfig -o /etc/grub2.cfg
     ``````

   - UEFI，使用：

     ```bash
     grub2-mkconfig -o /etc/grub2-efi.cfg
     ```

     

3. 重新引导系统生效。

   

## 通用块设备调整参数

通用调整参数位于`/sys/block/sdX/queue`目录中。列出的调整参数与I/O调度器调整分开，适用于所有I/O调度器。

