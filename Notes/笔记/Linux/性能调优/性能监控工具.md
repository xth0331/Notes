##  性能监控工具

> 关于性能调优可能你需要使用到的性能监控工具（也可以说是监控性能的手段）。这里不详细说明工具的具体使用方法和参数，这些最后会单独整理一份。

## proc

`/proc`文件系统是包含代表Linux内核当前状态文件的层次结构的目录，它允许用户和应用程序查看内核的系统试图。

`/proc`目录还包含有关系统硬件和任何当前正在运行的进程信息。`/proc`文件系统中的大多数文件都是只读的，但是`/proc/sys/`中的文件，可以由用户和应用程序操纵，以便将配置更改传递给内核。

## 命令行工具

### top

`procps-ng`包提供的`top`工具提供正在运行系统中进程的动态试图。他可以显示各种信息，包括系统摘要和当前由系统内核管理的任务列表。还具有操作流程的能力，并且在系统重启期间使配置更改保持不变。

默认情况下，显示的进程根据CPU使用的百分比排序，以便可以轻松查看小号最多资源的进程。信息顶部的显示和操作都是可以配置的。

### vmstat

虚拟内存统计工具`vmstat`提供有关系统进程，内存，分页，块输入/输出，中断和CPU活动的即时报告。`vmstat`允许设置采样间隔，以便近实时的观察系统活动。

### sar

系统活动报告器，`sar`，收集并报告当天到目前为止发生的系统的活动信息。默认输出显示当天的CPU使用情况，从当天开始的十分钟00::00:00）。

使用`-i`选项以秒为单位设置间隔时间，例如`sar -i 60`告诉`sar`每分钟检查一次CPU使用情况。

`sar`是`top`手动创建系统活动定期报告的替代方法。它由`sysstat`包提供。

## perf

`perf`工具通过硬件性能计数器和内核跟踪点来跟踪其他命令和应用程序对系统的影响。`perf`的子命令可以显示和记录常见性能事件和统计信息，并分析和报告记录的数据。

## turbostat

`turbostat`由`kernel-tools`包提供。它在处理器拓扑结构，频率，空闲功率状态统计，温度和功率。

`turbostat`可用于识别在功率使用或空闲时间方面效率低下的服务器。它还有助于识别系统上发生的系统管理中断（SMI）的速率。还可以用于验证电源管理调整的效果。

`turbostat`需要root权限。还需要处理器支持：

- 不变的时间戳计数器
- APERF模型专用寄存器
- MPERF模型专用寄存器

## iostat

`iostat`由`sysstat`包提供，可以监控并报告系统I/O设备负载，帮助决定平衡物理磁盘之间的I/O负载。

## irqbalance

`irqbalance`可在处理器之间分配硬件终端，提高系统性能。

## ss

`ss`用于输出有关套接字的统计信息，允许随时评估设备性能。默认情况下，`ss`列出已建立连接的打开的非监听TCP套接字，虽然`ss`提供了很多选项以过滤有关套接字的统计信息（一种常见用法是`ss -tmpie`显示有关套接字内存使用情况和套接字的进程详细信息）。但建议使用`netstat`，`netstat`由`net-tools`包提供。

## numastat

