# Terraform资源

资源是Terraform语言中最重要的元素。每个资源块都描述一个或多个基础结构对象，例如虚拟网络，计算实例或更高级别的组件，例如dns记录。

##　资源语法

资源声明可以包括许多高级功能，但是初始使用只需要一小部分。稍后将在页面中介绍更高级的语法功能，例如产生多个相似远程对象的单个资源声明。

```yaml
resource "aws_instance" "web" {
	ami	          = "ami-a1b2c3d4"
	instance_type = "t2.micro"
}
```

`resource`块使用给定的本地名称(web)声明给定类型(aws_instance)的资源。该名称用于从同一Terraform模块中的其他位置引用此资源，但在模块范围之外没有任何意义。

资源类型和名称一起用作给定资源的标识符，因此在模块内必须唯一。

在`resource`主体中(`{`和`}`)是资源本身的配置参数。在本节中大多数参数取决于资源的类型，实际上在这个示例中`ami`和`instance_type`都是专门为`aws`实例资源类型定义的参数。

> 资源了名称必须以字母或下划线开头，并且只能包含字母、数字、下划线和破折号。

## 资源类型和参数

每个资源都与单个资源类型相关联，该资源类型确定了它管理的基础架构对象的类型以及该资源支持哪些参数和其他属性。

每个资源类型依次属于一个`provider`，该`provider`是Terraform的一个插件、提供资源类型的集合。`provider`同行提供资源来管理单个云或基础设施平台。

资源块主体中大多数项目特定与所选的资源类型。这些参数可以充分利用表达式和其他动态Terraform语言功能。

Terraform本身还定义了一些参数，这些参数适用于所有资源类型。

## 资源行为

一个`Resource`块描述了希望特定基础架构对象与给定设置一起存在的意图。如果是第一次编写新配置，则它定义的资源将仅存在于配置中，并且将不代表目标平台中的实际基础架构对象。

应用Terraform配置是创建、更新和销毁实际基础设施对象以使其设置与配置相匹配的过程。

当Terraform创建一个由`resource`块表示的新基础架构对象时，该真实对象的标识符将存储在Terraform的状态中，以便可以对其进行更新和销毁以响应将来的更改。对于状态中已经具有关联基础架构对象的资源块，Terraform将对象的实际配置中给定的参数进行对比，并在必要时更新对象以匹配配置。

此常规行为适用于所有资源，无论类别。对于每种资源类型而言，创建，更新或销毁资源的含义细节均不同，但是此标准是通用的。



## 资源依赖

配置仲的大多数资源没有任何特定关系，并且Terraform可以并行更改几个不相关的资源。

但是，某些资源必须再特定资源之后处理；有时这是由于资源的 工作方式而引起的，有时资源的配置仅需要由另一个资源生成的信息。

大多数资源依赖关系是自动处理的。Terraform分析任何资源块仲的任何表达式以查找对其他对象的引用，和对待这些引用隐式排序要求在创建，更新，或破坏资源。由于大多数对其他资源具有行为依赖性的资源也页

